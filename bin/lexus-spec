#!/usr/bin/env node
const spec = require('../lib/spec');

(async function () {
  switch (process.argv[2]) {
    case 'bundle':
      await doBundle();
      break;
    case 'validate':
      await doValidate(process.argv[3]);
      break;
    default:
      console.error('Invalid option provided!');
      process.exit(1);
  }
}());

async function doBundle() {
  let schema = await spec.bundle();
  console.info(JSON.stringify(schema, null, 2));
}

async function doValidate(query) {
  await spec.validate(require(query));
}
